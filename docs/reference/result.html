<html>
<head>
<link rel="stylesheet" type="text/css" href="../styles/rao_general.css">
<link rel="stylesheet" href="../styles/rao_highlight.css">
<meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
<script src="../highlight.js.prebuilt/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</head>
<body>
<div id="wrapper">
    <div id="sidebar-wrapper">
        <div class="sidebar-nav">
            <h2><div align="center">Содержание</div></h2>
            <li><a href="../reference/resource.html">Ресурсы</a></li>
            <li><a href="../reference/event.html">События</a></li>
            <li><a href="../reference/pattern.html">Образцы</a></li>
            <li><a href="../reference/dpt.html">Точки принятия решений</a></li>
            <li><a href="../reference/sequence.html">Последовательности</a></li>
            <li><a href="../reference/constant.html">Константы</a></li>
            <li><a href="../reference/result.html">Результаты моделирования</a></li>
        </div>
    </div>
    <div id="page-content-wrapper"><div class="page-content">

<h2>Результаты</h2>
<p>Результаты (собираемые показатели) моделирования описываются с помощью ключевого слова <code class="rao">result</code>.</p>
<pre><code class="rao">result <i>имя_результата</i> = <i>тип_результата</i>(<i>параметры_результата</i>);</code></pre>
<p>Тип результата может быть одним из следующих:</p>
<ul>
    <li><code class="rao">getValue(<i>арифметическое_выражение</i>)</code><br>Вычисление значения переданного в качестве параметра выражения в момент окончания моделирования.</li>
    <li><code class="rao">watchParameter(<i>полное_имя_параметра_ресурса</i>)</code><br>Cбор статистических данных по изменению значения параметра ресурса</li>
    <li><code class="rao">watchState(<i>логическое_выражение</i>)</code><br>Cбор статистических данных по изменению состояния системы, описываемого логическим выражением.</li>
    <li><code class="rao">watchQuant(<i>имя_типа_ресурса</i>, <i>логическое_выражение</i>)</code><br>Cбор статистических данных по изменению количества ресурсов определенного типа, удовлетворяющих определенным условиям. Сбор статистики производится только по тем ресурсам, для которых значение логического выражения является истинным. Для сбора данных по всем ресурсам данного типа в качестве второго параметра следует указать ключевое слово <code class="rao">any</code>.</li>
    <li><code class="rao">watchValue(<i>имя_типа_ресурса</i>, <i>логическое_выражение</i>, <i>арифметическое_выражение</i>)</code><br>Cбор статистических данных по произвольному арифметическому выражению. Сбор статистики происходит в момент унитожения ресурса указанного типа, удовлетворяющего указанному условию.</li>
</ul>
<p>Примеры:</p>
<p>Имеется модель обработки деталей в цехе металлообработки. Ресурсы модели описываются следующим образом:</p>
<pre><code class="rao">enum Состояние_станка {свободен, загружается, готов_к_обработке,
        работает, разгружается, закончил_обработку, требует_переналадки, требует_ремонта};

enum Тип_заготовки {вал, диск, корпус};

type Цех {
    int число_активных_заказов;
}

type Станок {
    int номер;
    Состояние_станка состояние;
    double длительность_обработки;
    int деталей_обработано;
}

type Заготовка {
    int время_поступления;
    int время_окончания_обработки;
    int номер_заказа;
    Тип_заготовки тип;
}

resource цех = Цех.create(0);
resource станок_1 = Станок.create(1, Состояние_станка.Свободен, 20.0, 0);</code></pre>
<p>Число деталей, обработанных первым станком на момент окончания моделирования:</p>
<pre><code class="rao">result обработано_на_станке_1 = getValue(станок_1.деталей_обработано);</code></pre>
<p>Статистика по времени нахождения первого станка в процессе обработки:</p>
<pre><code class="rao">result время_1_в_процессе_обработки = watchState(станок_1.состояние == Состояние_станка.работает);</code></pre>
<p>Статистика по числу активных заказов в цехе:</p>
<pre><code class="rao">result число_невыполненных_заказов = watchParameter(цех.число_активных_заказов);</code></pre>
<p>Статистика по числу заготовок в обработке:</p>
<pre><code class="rao">result число_заготовок_в_обработке = watchQuant(Заготовка, any);</code></pre>
<p>Статистика по числу заготовок типа "вал" в обработке:</p>
<pre><code class="rao">result число_валов_в_обработке = watchQuant(Заготовка, Заготовка.тип == Тип_заготовки.вал);</code></pre>
<p>Статистика по времени обработки деталей типа "корпус":</p>
<pre><code class="rao">result время_обработки_корпусов = watchValue(
        Заготовка,
        Заготовка.тип == Тип_заготовки.диск,
        Заготовка.время_окончания_обработки - Заготовка.время_поступления);</code></pre>

</div></div></div>
</body>
</html>
